$(function(){$(".checkall").change(function(){$(".j-checkbox, .checkall").prop("checked",$(this).prop("checked"));if($(this).prop("checked")){$(".cart-item").addClass("check-cart-item")}else{$(".cart-item").removeClass("check-cart-item")}});$(".j-checkbox").change(function(){if($(".j-checkbox:checked").length===$(".j-checkbox").length){$(".checkall").prop("checked",true)}else{$(".checkall").prop("checked",false)}if($(this).prop("checked")){$(this).parents(".cart-item").addClass("check-cart-item")}else{$(this).parents(".cart-item").removeClass("check-cart-item")}});$(".increment").click(function(){var d=$(this).siblings(".itxt").val();d++;$(this).siblings(".itxt").val(d);var c=$(this).parents(".p-num").siblings(".p-price").html();c=c.substr(1);console.log(c);var b=(c*d).toFixed(2);$(this).parents(".p-num").siblings(".p-sum").html("￥"+b);a()});$(".decrement").click(function(){var c=$(this).siblings(".itxt").val();if(c==1){return false}c--;$(this).siblings(".itxt").val(c);var b=$(this).parents(".p-num").siblings(".p-price").html();b=b.substr(1);console.log(b);$(this).parents(".p-num").siblings(".p-sum").html("￥"+(b*c).toFixed(2));a()});$(".itxt").change(function(){var c=$(this).val();var b=$(this).parents(".p-num").siblings(".p-price").html();b=b.substr(1);$(this).parents(".p-num").siblings(".p-sum").html("￥"+(b*c).toFixed(2));a()});a();function a(){var c=0;var b=0;$(".itxt").each(function(d,e){c+=parseInt($(e).val())});$(".amount-sum em").text(c);$(".p-sum").each(function(d,e){b+=parseFloat($(e).text().substr(1))});$(".price-sum em").text("￥"+b.toFixed(2))}$(".p-action a").click(function(){$(this).parents(".cart-item").remove();a()});$(".remove-batch").click(function(){$(".j-checkbox:checked").parents(".cart-item").remove();a()});$(".clear-all").click(function(){$(".cart-item").remove();a()})});